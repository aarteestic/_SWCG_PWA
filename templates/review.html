<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shadow Wizard Coding Gang Website</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="icon" href="{{ url_for('static', filename='ASSETS/WBESITE_ICON.ico') }}">
  <link rel="manifest" href="/manifest.json">
</head>


<style>
  #scrollableMovieTable {
    margin-left: auto;
    margin-right: auto; /*aligns the table in the middle */

    font-size: 18px;
    color: #e1e1e1;
    font-family: inherit;
    font-weight: 800;

    height:450px;
    overflow-y: scroll;
    scrollbar-color: coral #111;
    scroll-snap-align: center;
    scroll-margin: 10px;
    overflow-x: hidden;
  }

  #myInput {

    margin-left: 5%;
    margin-right: 5%; /*aligns the table in the middle */

    width: 80%; /* Full-width */


    font-size: 10px; /* Increase font-size */
    padding: 12px 20px 12px 40px; /* Add some padding */
    border: 1px solid #ddd; /* Add a grey border */
    margin-bottom: 12px; /* Add some space below the input */

  }

  .recordValue {
    float:left;
    height: 100px;
    padding-left: 10px;
    text-align: center;
  }


  #record {
    
    margin-left: auto;
    margin-right: auto; /*aligns the table in the middle */

    border:1px solid coral;
    background-color:#111;
    border-radius: 25px;

    height:30%px;
    width: 80%;
    display:grid;
    grid-template-columns: 200px 50% auto;
    grid-template-rows: 100px auto auto;
  }
</style>


<body style="overflow-y: scroll">
  <div class="background-layer"></div>
  <nav>
    <div class="logo-container">
      <a href="/"> <!--calls the index page or 'default' URL-->
        <img src="{{ url_for('static', filename='ASSETS/NAV_IMG.png') }}" alt="Logo" class="navbar-logo" style="height:50px;width:50px;">
      </a>
    </div>
    <button onclick="navigateTo(1)">Home</button>
    <button onclick="navigateTo(2)">Movies</button>
    <button onclick="navigateTo(3)">Users</button>
    <button class="invisible" disabled></button>
    <button class="invisible" disabled></button>
    <button class="invisible" disabled></button>
    {% if login: %}
    <button onclick="sendUserToTheirPage()">{{ sessionUsername }}</button>
    <form action="/" class="logoutForm" method="post">
      <button type="submit" style="height:60px;">Logout</button>
    </form>
    {% else: %}
    <button onclick="navigateTo(5)">Register</button>
    <button onclick="navigateTo(6)">Login</button>
    {% endif %}
  </nav>

<br><br>
  <div class="grid-container" style="display:grid;grid-template-columns: 200px 50% auto;grid-template-rows: 100px 100px 100px;background-color: #111;border: 1px solid coral;">

    <div style="grid-column:1/span 1;grid-row:1/span 3"> <img src={{ movie[movieNumber][4] }} width=200px height=300px></div>
    <div style="grid-column: 2/span 1;grid-row:1/span 1" class="data"> <p class="orange" style="font-size: 22px;">{{ movie[movieNumber][0] }}</p></div>
    <div style="grid-column: 3/span 1;grid-row:1/span 1" class="data"> <p class="orange">YEAR:</p> {{ movie[movieNumber][1] }}</div>
    <div style="grid-column: 3/span 1;grid-row:2/span 1" class="data"> <p class="orange">RATING:</p> {{ movie[movieNumber][2] }} out of 10</div>
    <div style="grid-column: 3/span 1;grid-row:3/span 1" class="data"> <p class="orange">DIRECTOR/S:</p> {{ movie[movieNumber][2] }}</div>
    <div style="grid-column: 2/span 1;grid-row:2/span 1" class="data"> <p class="orange">GENRE/S:</p> {{ movie[movieNumber][3] }}</div>
  </div>
  <br><br><br><br>

  <style>
    .data {
      font-size: 18px;
      color: #e1e1e1;
      font-family: inherit;
      font-weight: 800;
      text-align: center;
    }
    .orange {
      color: coral;
    }

  </style>

<p class="data" style="color:coral;background-color: #111;width:500px;margin-left: auto;margin-right: auto;border-radius: 25px; border: 1px solid coral;font-size: 40px;">Submit a review!</p>
<div style="margin-left:auto;margin-right: auto;">
  <form id="reviewForm" action="{{ websiteURL }}" method="post" onsubmit="prepareForm()">
    <br>
    <div style="text-align: center;">
    <label for="rating" class="data" style="color:coral;">Rating out of 10: </label>
    <select name="rating" id="rating" style="background-color: #111;color:coral;border: 1px solid coral;font-size: 15px; font-style: inherit; font-weight: 800;">
      {% for i in range(1, 11)%}
      <option value={{ i }}>{{ i }}</option>
      {% endfor %}
    </select>
    <br>
    <br>
    <textarea id="reviewText" name="reviewText" style="width:90%;height:200px;resize:none;background-color: #111;border: 1px solid coral; font-style: inherit; font-weight: 800;" placeholder="Enter review here."></textarea>
    <br>
    <button type="submit" style="background-color: #111;color: coral;border: 1px solid coral; border-radius: 10px;font-size: 20px;font-family: inherit;font-weight: 800;">Submit</button>
    </div>
  </form>
</div>

<br>
<p class="data" style="color:coral;background-color: #111;width:300px;margin-left: auto;margin-right: auto;border-radius: 25px; border: 1px solid coral; font-size: 40px;">Reviews</p>
<br>
<div style="overflow-wrap: break-word; height:fit-content;max-width: 50%;"></div>
  <div id="scrollableMovieTable">
    {% if movieReview != [] %}
      {% for review in movieReview %} <!--add images in the next update-->
        <div id="record" class="record">  <!--https://www.w3schools.com/css/css_grid_item.asp see this website for details on 'grid system'-->
          <div style="grid-column:2/span 1;grid-row:1/span 1;width:50%;" class="recordValue"><p class="data" style="color:coral;">NAME:</p> {{ review[2] }}</div>  <!--proof of concept for dynamically generated movie stuff-->
          <div style="grid-column:3/span 1;grid-row:1/span 1;width:250px;"class="recordValue"><p class="data" style="color:coral;">RATING:</p> {{ review[1] }} out of 10</div>
          <div style="grid-column:1/span 3;grid-row:2/span 2;max-width:600px; overflow-wrap: break-word;height: fit-content;" class="recordValue"><p class="data" style="color:coral;text-align: left;">REVIEW:</p>{{ review[0] }}</div> <!--genre-->
        </div>
        <br>
        <br>
      {% endfor %}
      {% else %}
      <div style="margin-left: auto; margin-right: auto; background-color: #111; border-radius: 10px; width: fit-content; border: 1px solid coral;">
        <p style="font-style: inherit; font-weight: 800;color:#fff;font-size: 12px;">No reviews... Submit one now!</p>
        
      </div>
    {% endif %}
    </div>




  <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
  <script>
    function sendUserToTheirPage() {
      window.location.href = '/users/{{sessionUsername}}'
    }
      let reviewForm = document.getElementById('reviewForm'); //Validates the form's contents

      reviewForm.addEventListener('submit', function(e) {
        e.preventDefault();
        var reviewText;
        reviewText = document.getElementById('reviewText').value;
        if (reviewText == '') {
          alert('Review is empty! Write something in.');
        }
        else {
          alert('Text detected: ' + reviewText) //apply this to login too
          reviewForm.submit();
        }
      });

  </script>
</body>
</html>
